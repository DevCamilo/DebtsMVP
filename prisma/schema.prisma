datasource db { provider = "postgresql"; url = env("DATABASE_URL") }
generator client { provider = "prisma-client-js" }

model User {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  debts        Debt[]
}

model Debt {
  id          String     @id @default(uuid())
  userId      String
  title       String     @db.VarChar(120)
  description String?    @db.VarChar(500)
  amountCents Int
  currency    String     @db.VarChar(3)
  status      DebtStatus @default(PENDING)
  paidAt      DateTime?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  version     Int        @default(1)

  user        User       @relation(fields: [userId], references: [id])

  @@index([userId, status])
  @@check(amountCents > 0)
}

enum DebtStatus { PENDING PAID }